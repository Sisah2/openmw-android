From ea28abf6f46126b8d61d07d30d1c1b40984f94cf Mon Sep 17 00:00:00 2001
From: Duron27 <>
Date: Thu, 14 Dec 2023 20:11:28 -0500
Subject: [PATCH 1/7] Update before_script.msvc.sh

---
 CI/before_script.msvc.sh | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/CI/before_script.msvc.sh b/CI/before_script.msvc.sh
index cdac794a7e5..338ca1ee9e9 100644
--- a/CI/before_script.msvc.sh
+++ b/CI/before_script.msvc.sh
@@ -902,7 +902,8 @@ printf "Qt ${QT_VER}... "
 	fi
 
 	cd $QT_SDK
-	add_cmake_opts -DQT_QMAKE_EXECUTABLE="${QT_SDK}/bin/qmake.exe"
+	add_cmake_opts -DQT_QMAKE_EXECUTABLE="${QT_SDK}/bin/qmake.exe" \
+		-DCMAKE_PREFIX_PATH="$QT_SDK"
 	for CONFIGURATION in ${CONFIGURATIONS[@]}; do
 		if [ $CONFIGURATION == "Debug" ]; then
 			DLLSUFFIX="d"
@@ -929,7 +930,7 @@ printf "SDL 2.24.0... "
 		rm -rf SDL2-2.24.0
 		eval 7z x -y SDL2-devel-2.24.0-VC.zip $STRIP
 	fi
-	SDL2DIR="$(real_pwd)/SDL2-2.24.0"
+	export SDL2DIR="$(real_pwd)/SDL2-2.24.0"
 	for config in ${CONFIGURATIONS[@]}; do
 		add_runtime_dlls $config "$(pwd)/SDL2-2.24.0/lib/x${ARCHSUFFIX}/SDL2.dll"
 	done
@@ -1024,8 +1025,6 @@ printf "zlib 1.2.11... "
 	echo Done.
 }
 
-add_cmake_opts -DCMAKE_PREFIX_PATH="\"${QT_SDK};${SDL2DIR}\""
-
 echo
 cd $DEPS_INSTALL/..
 echo

From 7ae5442234c93618d01c154ba73229fc2f003e01 Mon Sep 17 00:00:00 2001
From: Duron27 <>
Date: Thu, 14 Dec 2023 20:12:55 -0500
Subject: [PATCH 2/7] Update CMakeLists.txt

---
 CMakeLists.txt | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 34df0216da1..843dea802f1 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -114,6 +114,7 @@ include(WholeArchive)
 configure_file ("${OpenMW_SOURCE_DIR}/docs/mainpage.hpp.cmake" "${OpenMW_BINARY_DIR}/docs/mainpage.hpp")
 
 option(BOOST_STATIC "Link static build of Boost into the binaries" FALSE)
+option(SDL2_STATIC "Link static build of SDL into the binaries" FALSE)
 option(QT_STATIC "Link static build of Qt into the binaries" FALSE)
 
 option(OPENMW_USE_SYSTEM_BULLET "Use system provided bullet physics library" ON)
@@ -482,6 +483,7 @@ set(SOL_CONFIG_DIR ${OpenMW_SOURCE_DIR}/extern/sol_config)
 include_directories(
     BEFORE SYSTEM
     "."
+    ${SDL2_INCLUDE_DIR}
     ${Boost_INCLUDE_DIR}
     ${MyGUI_INCLUDE_DIRS}
     ${OPENAL_INCLUDE_DIR}
@@ -493,8 +495,7 @@ include_directories(
     ${ICU_INCLUDE_DIRS}
 )
 
-link_directories(${Boost_LIBRARY_DIRS} ${COLLADA_DOM_LIBRARY_DIRS})
-
+link_directories(${SDL2_LIBRARY_DIRS} ${Boost_LIBRARY_DIRS} ${COLLADA_DOM_LIBRARY_DIRS})
 if(MYGUI_STATIC)
     add_definitions(-DMYGUI_STATIC)
 endif (MYGUI_STATIC)

From debca57b4e72a02879db44ed34e5e5f221614fd5 Mon Sep 17 00:00:00 2001
From: Duron27 <>
Date: Thu, 14 Dec 2023 20:13:39 -0500
Subject: [PATCH 3/7] Update CMakeLists.txt

---
 apps/launcher/CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/apps/launcher/CMakeLists.txt b/apps/launcher/CMakeLists.txt
index daae65dc668..87cee06e5d5 100644
--- a/apps/launcher/CMakeLists.txt
+++ b/apps/launcher/CMakeLists.txt
@@ -77,7 +77,7 @@ if (WIN32)
 endif (WIN32)
 
 target_link_libraries(openmw-launcher
-    SDL2::SDL2
+    ${SDL2_LIBRARY_ONLY}
     ${OPENAL_LIBRARY}
     components_qt
 )

From 2b337e37961788c80f18f939fe5ce6d4cd933498 Mon Sep 17 00:00:00 2001
From: Duron27 <>
Date: Thu, 14 Dec 2023 20:14:30 -0500
Subject: [PATCH 4/7] Update CMakeLists.txt

---
 apps/openmw/CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/apps/openmw/CMakeLists.txt b/apps/openmw/CMakeLists.txt
index db44b91159e..7e1c39f3df1 100644
--- a/apps/openmw/CMakeLists.txt
+++ b/apps/openmw/CMakeLists.txt
@@ -150,7 +150,7 @@ target_link_libraries(openmw
     ${OPENAL_LIBRARY}
     ${FFmpeg_LIBRARIES}
     ${MyGUI_LIBRARIES}
-    SDL2::SDL2
+    ${SDL2_LIBRARY}
     ${RecastNavigation_LIBRARIES}
     "osg-ffmpeg-videoplayer"
     "oics"

From f53a64d0d102bd46f4cceed37bfc7ce2fe6d180b Mon Sep 17 00:00:00 2001
From: Duron27 <>
Date: Thu, 14 Dec 2023 20:15:14 -0500
Subject: [PATCH 5/7] Update CMakeLists.txt

---
 components/CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/components/CMakeLists.txt b/components/CMakeLists.txt
index f61a5bd0b25..d50301e9d76 100644
--- a/components/CMakeLists.txt
+++ b/components/CMakeLists.txt
@@ -556,7 +556,7 @@ target_link_libraries(components
     ${Boost_PROGRAM_OPTIONS_LIBRARY}
     ${Boost_IOSTREAMS_LIBRARY}
 
-    SDL2::SDL2
+    ${SDL2_LIBRARY}
     ${OPENGL_gl_LIBRARY}
     ${MyGUI_LIBRARIES}
     ${LUA_LIBRARIES}

From f929984db00ae04ec4b8f1737747a38aa1610d90 Mon Sep 17 00:00:00 2001
From: Duron27 <>
Date: Thu, 14 Dec 2023 20:15:46 -0500
Subject: [PATCH 6/7] Update CMakeLists.txt

---
 extern/oics/CMakeLists.txt | 2 --
 1 file changed, 2 deletions(-)

diff --git a/extern/oics/CMakeLists.txt b/extern/oics/CMakeLists.txt
index 4bd3bc51ad6..1b9fea9217f 100644
--- a/extern/oics/CMakeLists.txt
+++ b/extern/oics/CMakeLists.txt
@@ -20,8 +20,6 @@ else()
     target_link_libraries(oics local_tinyxml)
 endif()
 
-target_link_libraries(oics SDL2::SDL2)
-
 if (MSVC)
     target_precompile_headers(oics PUBLIC <algorithm> <string>)
 endif()

From 01b8ab7e4b98077e027f383605925db1792c8c0d Mon Sep 17 00:00:00 2001
From: Duron27 <>
Date: Thu, 14 Dec 2023 20:16:09 -0500
Subject: [PATCH 7/7] Update CMakeLists.txt

---
 extern/osg-ffmpeg-videoplayer/CMakeLists.txt | 1 -
 1 file changed, 1 deletion(-)

diff --git a/extern/osg-ffmpeg-videoplayer/CMakeLists.txt b/extern/osg-ffmpeg-videoplayer/CMakeLists.txt
index 10c8d356a07..7e2712f19b7 100644
--- a/extern/osg-ffmpeg-videoplayer/CMakeLists.txt
+++ b/extern/osg-ffmpeg-videoplayer/CMakeLists.txt
@@ -14,7 +14,6 @@ include_directories(${FFmpeg_INCLUDE_DIRS})
 add_library(${OSG_FFMPEG_VIDEOPLAYER_LIBRARY} STATIC ${OSG_FFMPEG_VIDEOPLAYER_SOURCE_FILES})
 target_link_libraries(${OSG_FFMPEG_VIDEOPLAYER_LIBRARY} ${FFmpeg_LIBRARIES})
 target_link_libraries(${OSG_FFMPEG_VIDEOPLAYER_LIBRARY} ${OSG_LIBRARIES})
-target_link_libraries(${OSG_FFMPEG_VIDEOPLAYER_LIBRARY} SDL2::SDL2)
 
 link_directories(${CMAKE_CURRENT_BINARY_DIR})
 
